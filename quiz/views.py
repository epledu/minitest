import os

import random

from django.http import HttpResponse
from django.shortcuts import get_object_or_404, redirect, render
from django.templatetags.static import static

from .models import BlogPost, Choice, Question, Quiz, Result

BLOG_POSTS = [
    {
        "slug": "dopamine-detox-guide",
        "title": "도파민 디톡스, 정말 필요한 사람은 누구일까?",
        "summary": "자극 피로가 쌓이는 신호와 회복 루틴을 정리합니다.",
        "sections": [
            {
                "heading": "서론",
                "body": "도파민은 흔히 ‘즐거움의 물질’로 알려져 있지만, 행동과학에서는 ‘동기와 기대를 조절하는 신호’로 설명됩니다. 즉, 무엇을 더 원하게 만드는지에 가까운 개념입니다. 그래서 자극적인 콘텐츠를 많이 소비할수록 일상의 작은 만족이 희미해지는 현상이 나타날 수 있습니다. 이 글은 그런 리듬이 어떻게 만들어지고, 어떻게 회복될 수 있는지에 초점을 맞춥니다. 특히 일상 속 ‘보상 기대치’가 올라가는 순간을 함께 짚어보려 합니다.",
            },
            {
                "heading": "본론 1. 보상 예측 오차와 자극의 강도",
                "body": "연구에서 자주 언급되는 개념 중 하나가 ‘보상 예측 오차’입니다. 기대했던 보상과 실제 보상이 다를 때 뇌가 강하게 반응한다는 설명이죠. 알고리즘 기반의 숏폼은 이 오차를 크게 만들기 때문에 ‘다음 자극’을 계속 찾게 만듭니다. 이 과정이 반복되면 주의 집중이 분절되고, 자극 강도가 낮은 활동이 상대적으로 지루하게 느껴집니다. 행동과학에서는 이런 패턴을 변동 보상 스케줄과 연결해 설명하기도 합니다.",
            },
            {
                "heading": "본론 2. 주의 잔여와 인지 부하",
                "body": "짧은 자극이 잦아질수록 ‘주의 잔여(attentional residue)’가 남아 집중을 방해합니다. 이는 업무나 학습의 피로를 빠르게 누적시키는 요인이 됩니다. 또한 하루 종일 이어지는 알림 확인은 인지 부하를 높여 수면의 질까지 영향을 줄 수 있습니다. 디지털 자극은 빛과 소리로 각성을 유지하기 때문에 저녁의 회복 루틴과 충돌하기 쉽습니다. 따라서 디톡스는 ‘끊기’가 아니라, 주의력을 회복시키는 환경 설계로 이해하는 편이 현실적입니다.",
            },
            {
                "heading": "본론 3. 회복 루틴은 낮은 자극부터",
                "body": "완전 차단은 지속 가능성이 낮습니다. 대신 낮은 자극의 활동을 ‘일상 루틴’으로 넣는 방식이 효과적입니다. 예를 들어 짧은 산책, 정리, 메모, 느린 음악처럼 강도가 낮지만 꾸준히 가능한 행동을 선택하세요. 행동과학에서는 이 과정을 ‘마찰을 낮춘 대체 보상’으로 봅니다. 욕구와 행동 사이의 간격을 조금씩 늘리는 것이 핵심입니다. 작은 전환이 반복될수록 도파민 기대치도 자연스럽게 안정됩니다.",
            },
            {
                "heading": "결론",
                "body": "도파민 디톡스는 거창한 금욕이 아니라 리듬의 재설계입니다. 오늘 하루 10분만이라도 ‘노-스크롤’ 시간을 만들고, 대신 낮은 자극의 활동을 넣어 보세요. 작은 실천은 반복될수록 안정된 리듬을 만들고, 그 리듬이 결국 만족감을 회복시켜 줍니다. 지금의 결과는 시작점일 뿐이며, 변화는 항상 미세한 선택에서 출발합니다. 가능하다면 하루 중 자극을 허용하는 시간과 회복 시간을 구분해 보세요. 이런 구획화는 환경 설계의 한 형태로, 충동적 사용을 줄이는 데 도움이 됩니다. 간단히라도 기록을 남기면 어떤 자극이 피로를 키우는지 패턴을 더 빨리 파악할 수 있습니다. 핵심은 강하게 끊는 것이 아니라, 자극과 회복의 비율을 안정적으로 유지하는 것입니다.",
            },
        ],
        "deep_dive": "실제로 도파민은 ‘톤(tonic)’과 ‘스파이크(phasic)’로 구분해 설명되며, 잦은 스파이크는 기본 톤의 안정감을 흔들 수 있다고 여겨집니다. 그래서 급격한 자극만 줄이는 것보다 낮은 자극의 만족을 회복시키는 활동이 중요합니다. 규칙적인 수면, 가벼운 운동, 햇빛 노출 같은 기본 루틴은 보상 민감도를 안정화하는 데 도움이 된다고 알려져 있습니다. 자극을 끊기 어렵다면 ‘마찰’을 높이는 전략이 유효합니다. 홈 화면 정리, 자동 재생 끄기, 알림 묶기처럼 진입 장벽을 조금만 올려도 사용 시간이 줄어드는 경우가 많습니다. 결국 디톡스의 핵심은 나에게 맞는 자극 허용치를 찾고, 회복 가능한 리듬을 설계하는 데 있습니다.",
    },
    {
        "slug": "micro-spending-patterns",
        "title": "마이크로 소비, 왜 작은 결제가 더 강할까?",
        "summary": "소확행 소비의 심리와 후회 포인트를 짚어봅니다.",
        "sections": [
            {
                "heading": "서론",
                "body": "마이크로 소비는 작은 비용으로 즉각적인 만족을 얻는 행동입니다. 행동경제학에서는 이를 ‘심리적 거래비용이 낮은 선택’으로 설명합니다. 작은 결제는 부담을 느끼기 전에 이루어지기 때문에 반복될수록 습관화되기 쉽습니다. 문제는 만족감이 오래 지속되지 않는다는 점입니다. 이 글은 그 심리를 파헤치고, 후회가 줄어드는 소비 리듬을 제안합니다.",
            },
            {
                "heading": "본론 1. 쾌락적 적응과 만족의 지속성",
                "body": "쾌락적 적응(hedonic adaptation)은 같은 자극이 반복될수록 만족감이 줄어드는 현상을 말합니다. 마이크로 소비는 이 적응 속도가 빠르기 때문에 ‘짧은 기쁨’이 ‘짧은 허무’로 전환되는 경우가 많습니다. 그래서 소비 직후의 감정이 아니라, 하루 뒤 혹은 일주일 뒤의 체감을 기준으로 보는 것이 중요합니다. 만족이 오래 가는 소비는 보통 ‘맥락’과 ‘기억’을 함께 남깁니다.",
            },
            {
                "heading": "본론 2. 지불의 고통과 디지털 결제",
                "body": "현금보다 디지털 결제가 더 쉽게 느껴지는 이유는 ‘지불의 고통’이 낮기 때문입니다. 클릭 한 번으로 완료되는 결제는 심리적 마찰을 줄여 충동성을 강화합니다. 연구에서는 결제 과정의 마찰이 커질수록 합리적 판단이 늘어날 가능성을 시사합니다. 예를 들어 결제 전에 한 번 더 확인하는 화면이 있거나, 저장된 결제 수단을 제거하는 방식이 효과적일 수 있습니다.",
            },
            {
                "heading": "본론 3. 소비를 가치와 연결하는 방식",
                "body": "소비를 줄이는 것보다 중요한 건 ‘어떤 소비가 나에게 오래 남는가’를 구분하는 일입니다. 기록을 남기거나 소비 목적을 한 문장으로 요약해 보는 방법도 도움이 됩니다. 예산의 총액보다 ‘주간 구매 빈도’를 줄이는 방식이 심리적으로 부담이 덜하면서도 효과가 큽니다. 결국 소비는 나의 가치와 연결될 때 후회가 줄어드는 경향이 있습니다.",
            },
            {
                "heading": "결론",
                "body": "마이크로 소비는 나쁜 행동이 아니라 조정이 필요한 리듬일 수 있습니다. 결제 후 남는 감정과 만족의 지속성을 점검하면서, 나에게 맞는 ‘작은 소비 규칙’을 만들어 보세요. 작은 통제가 누적되면 큰 후회는 자연스럽게 줄어듭니다. 결과는 방향을 알려줄 뿐이며, 선택의 기준은 스스로 설정할 수 있습니다. 예를 들어 ‘구매 전 10분 유예’, ‘주간 구매 횟수 제한’ 같은 간단한 룰은 실천 난이도가 낮습니다. 또한 지출 후 감정을 짧게 메모하면 어떤 소비가 회복을 돕는지 분명해집니다. 결국 소비는 나를 위한 투자일 때 가장 오래 남습니다.",
            },
        ],
        "deep_dive": "행동경제학에서는 작은 소비를 ‘멘탈 어카운팅’의 결과로 설명합니다. 사람은 지출을 심리적으로 분류하고, 작은 항목은 상대적으로 관대하게 처리하는 경향이 있습니다. 이때 즉시성 보상이 크면 구매가 반복되지만, 만족이 짧으면 허무함이 늘어납니다. 그래서 지출을 기록할 때 ‘금액’보다 ‘기분’을 함께 적는 것이 효과적입니다. 또한 ‘구매 지연’ 규칙을 적용하면 충동 구매가 줄어든다는 보고도 있습니다. 구독형 결제나 반복 결제는 자동성이 높으니 정기 점검 체크리스트를 만들어 두는 것이 좋습니다. 소비를 줄이려 하기보다, 나에게 오래 남는 소비를 구분하는 것이 핵심입니다. 구매 직전에 ‘내일의 나에게도 필요할까?’를 묻는 간단한 질문은 충동을 낮춥니다. 한 달에 한 번은 소비 카테고리를 리셋하는 것도 도움이 됩니다. 이 기준이 쌓이면 소비의 만족도도 안정됩니다.",
    },
    {
        "slug": "loneliness-management",
        "title": "외로움은 없애는 게 아니라 관리하는 것",
        "summary": "혼자 있는 시간과 연결의 균형을 다룹니다.",
        "sections": [
            {
                "heading": "서론",
                "body": "외로움은 단순히 혼자 있어서가 아니라, ‘정서적 연결이 부족하다’고 느낄 때 강해집니다. 사회심리학에서는 이를 ‘사회적 기본선 이론(social baseline theory)’으로 설명합니다. 즉, 사람은 기본적으로 누군가와의 연결을 전제로 에너지를 조절한다는 관점입니다. 이 글은 외로움의 완화가 아니라 ‘관리’에 초점을 둡니다. 특히 나에게 맞는 회복 방식이 무엇인지 찾는 과정이 핵심입니다.",
            },
            {
                "heading": "본론 1. 연결의 양보다 방식",
                "body": "소셜링을 많이 한다고 외로움이 줄어드는 것은 아닙니다. 중요한 건 ‘나에게 맞는 연결 방식’입니다. 짧고 가벼운 연결을 통해 에너지를 얻는 사람도 있고, 깊은 관계 한두 개가 더 안정감을 주는 사람도 있습니다. 자신이 어떤 방식에서 회복되는지 파악하는 것이 우선입니다. 이는 사회적 에너지 비용을 스스로 조정하는 과정이기도 합니다.",
            },
            {
                "heading": "본론 2. 코리규레이션과 정서적 유효성",
                "body": "정서 조절은 혼자서만 이루어지지 않습니다. 심리학에서는 ‘코리규레이션(co-regulation)’이라는 개념으로 설명합니다. 누군가와 짧게라도 감정을 공유하면 불안이 빠르게 완화되는 경우가 많습니다. 이때 중요한 것은 연결의 깊이보다, 감정이 ‘이해받았다’는 느낌입니다. 정서적 유효성이 높을수록 외로움의 강도는 빠르게 낮아집니다.",
            },
            {
                "heading": "본론 3. 혼자 있는 시간의 설계",
                "body": "외로움 관리의 또 다른 축은 ‘혼자 있는 시간을 어떻게 설계하느냐’입니다. 혼자 있는 시간이 방치가 되면 외로움이 커지지만, 계획이 되면 회복이 됩니다. 나만의 활동 인프라(산책 코스, 취미, 정리 루틴)를 만들어 두면 외로움의 파도를 부드럽게 넘길 수 있습니다. 이는 혼자 있음의 질을 높이는 ‘솔리튜드 설계’에 가깝습니다.",
            },
            {
                "heading": "결론",
                "body": "외로움은 제거가 아니라 조정의 대상입니다. 나에게 맞는 연결 방식과 혼자 있는 시간의 설계를 병행하면, 외로움은 불편한 감정이 아니라 ‘신호’로 변합니다. 오늘은 가장 부담이 적은 연결 1개 또는 혼자만의 루틴 1개를 선택해 보세요. 작은 선택이 누적되면 외로움의 파도는 더 잔잔해집니다. 주 1회라도 짧은 연결 루틴을 만들어 두면 정서적 안정감이 올라갑니다. 동시에 혼자 있는 시간을 의도적으로 보호하면 에너지 회복이 빨라집니다. 균형은 ‘내가 편한 방식’에서 시작됩니다.",
            },
        ],
        "deep_dive": "외로움은 애착 시스템과도 깊이 연결됩니다. 안전한 애착을 경험할수록 사람은 혼자 있는 시간에도 비교적 안정감을 느끼는 경향이 있습니다. 반대로 불안정한 애착은 연결의 부재를 위협으로 받아들이기 쉬워 외로움이 크게 느껴질 수 있습니다. 따라서 외로움 관리는 ‘관계의 질’과 ‘나의 회복 습관’을 함께 설계하는 일입니다. 정서적으로 안전한 사람 한 명을 확보하는 것만으로도 불안이 크게 줄어드는 사례가 많습니다. 동시에 혼자 있는 시간을 ‘방치’가 아닌 ‘회복’으로 설계하면 외로움이 줄어듭니다. 결과를 기반으로 나만의 연결·회복 루틴을 만들어 보세요. 사회적 피로가 높은 날에는 연결을 줄이고 회복을 우선하는 것도 전략입니다. 연결은 ‘질’과 ‘타이밍’이 맞을 때 가장 효과적입니다. 연결이 부담될 때는 ‘짧은 신호’만 주고받는 것도 충분합니다.",
        "deep_dive_extra": "실제 생활에서는 ‘연결의 빈도’보다 ‘연결의 회복감’을 기준으로 관리하는 것이 좋습니다. 예를 들어 대화 후의 에너지 수준을 1~5로 기록하면 어떤 관계가 회복을 돕는지 명확해집니다. 회복을 주는 사람과의 연결을 보호하는 것이 외로움 관리의 핵심입니다.",
    },
    {
        "slug": "intentional-life-vs-optimization",
        "title": "의도적 삶 vs 효율 과몰입, 내 균형점 찾기",
        "summary": "리추얼과 효율 사이에서 나만의 기준을 세웁니다.",
        "sections": [
            {
                "heading": "서론",
                "body": "현대인은 ‘최적화’라는 언어에 익숙합니다. 그러나 삶은 성과만으로 측정되지 않습니다. 리추얼은 삶에 의미와 리듬을 부여하고, 효율은 성과와 통제감을 제공합니다. 이 글은 두 방향 사이에서 어디에 서 있는지, 그리고 어떻게 균형을 잡을지에 대해 다룹니다. 중요한 것은 ‘지금의 나’에게 맞는 비율을 찾는 일입니다.",
            },
            {
                "heading": "본론 1. 리추얼이 주는 심리적 안정",
                "body": "리추얼은 반복되는 행동을 통해 예측 가능성을 높이고, 의사결정 피로를 줄여줍니다. 심리학에서는 이를 ‘인지적 안정화’로 설명합니다. 아침 커피, 일기, 산책처럼 작은 의식은 하루의 속도를 조절하는 역할을 하며, 불확실성이 높은 환경에서 특히 효과적입니다. 리추얼은 ‘의미 있는 반복’이라는 점에서 단순 습관과 구분됩니다.",
            },
            {
                "heading": "본론 2. 효율 중심 사고의 장점과 함정",
                "body": "효율은 성과를 높이고 자원을 절약하는 장점이 있지만, 모든 영역을 최적화하려는 태도는 오히려 압박을 증가시킬 수 있습니다. 생산성 강박이 높아지면 ‘휴식도 성과’로 재해석되어 회복이 어려워집니다. 즉, 효율은 목표일 때 유효하지만, 정체성이 되면 피로의 원인이 될 수 있습니다. 효율이 높아질수록 ‘통제 불안’이 함께 커질 수 있다는 점도 유의해야 합니다.",
            },
            {
                "heading": "본론 3. 균형을 만드는 ‘선택 기준’",
                "body": "균형의 핵심은 ‘나에게 지금 필요한 것’을 기준으로 선택하는 것입니다. 업무의 집중이 필요한 시기에는 효율을 높이고, 회복이 필요한 시기에는 리추얼을 강화하는 식의 ‘시즌성 조절’이 현실적입니다. 하나의 철학에 고정되기보다, 유연하게 조정하는 것이 지속 가능합니다. 선택 기준을 문장으로 적어두면 흔들림이 줄어듭니다.",
            },
            {
                "heading": "결론",
                "body": "의도적 삶과 효율은 대립이 아니라 도구입니다. 내 리듬을 살리는 작은 리추얼과 성과를 높이는 선택적 효율을 병행해 보세요. 결과는 지금의 성향을 보여주는 힌트일 뿐, 앞으로의 방향은 내가 정할 수 있습니다. 작은 실험을 반복하면 균형은 점점 선명해집니다. 주간 리뷰에서 ‘이번 주에 나에게 필요한 것’을 한 문장으로 정리해 두면 선택이 쉬워집니다. 한쪽으로 치우쳤다고 느낄 때는 반대쪽 행동을 아주 작게 추가해 보세요. 균형은 완성이 아니라 조정의 과정입니다.",
            },
        ],
        "deep_dive": "효율과 의도적 삶의 균형을 찾는 가장 실용적인 방법은 ‘가치 기준’을 문장으로 정의하는 것입니다. 예를 들어 ‘나는 회복을 우선할 때도 생산성을 완전히 놓지 않는다’ 같은 문장이 있으면 선택이 빠르고 안정적입니다. 리추얼은 단순 반복이 아니라, 내가 중요하게 여기는 것을 기억하게 하는 장치입니다. 반대로 효율은 특정 상황에서 강력한 도구이며, 무조건 배척할 대상이 아닙니다. 중요한 것은 어떤 상황에서 어떤 도구를 사용할지 스스로 결정하는 것입니다. 주간 리포트에 ‘에너지/성과/만족’을 간단히 기록하면 나만의 균형점을 찾는 데 도움이 됩니다. 목표가 흔들릴 때는 ‘이번 달에 포기해도 되는 것’을 정해 두면 마음이 가벼워집니다. 선택의 폭을 줄이면 효율과 의도 모두 유지됩니다. 하루에 5분만 ‘무목적 시간’을 넣어도 효율의 긴장이 낮아집니다.",
        "deep_dive_extra": "실행 팁으로는 하루 끝에 ‘오늘의 의도’ 한 줄을 적는 것이 좋습니다. 효율이 필요했던 순간과 의식이 필요했던 순간을 구분해 기록하면 다음 선택이 빨라집니다. 기준이 분명해질수록 균형은 안정됩니다.",
    },
    {
        "slug": "liquid-content-consumption",
        "title": "숏폼에서 롱폼까지, 나만의 콘텐츠 소비 루트",
        "summary": "콘텐츠를 소비하고 남기는 방식이 곧 습관입니다.",
        "sections": [
            {
                "heading": "서론",
                "body": "콘텐츠 소비는 이제 하나의 ‘인지적 식단’이 되었습니다. 짧은 자극을 빠르게 넘기는 습관은 즉각적인 즐거움을 주지만, 장기적으로는 집중력과 기억에 영향을 줄 수 있습니다. 이 글은 숏폼·롱폼·캡처형 소비의 차이를 정리하고 균형을 만드는 방법을 제안합니다. 내가 어떤 루트로 소비하는지 아는 것만으로도 변화가 시작됩니다.",
            },
            {
                "heading": "본론 1. 숏폼 소비의 강점과 한계",
                "body": "숏폼은 짧은 시간에 다양한 정보를 접하게 해주며, 주의 전환 속도를 높입니다. 하지만 자극이 반복될수록 새로운 것에 대한 기대치가 상승해 ‘정체된 콘텐츠’는 쉽게 지루하게 느껴질 수 있습니다. 이는 주의의 분절화를 강화하며, 긴 글이나 긴 영상에 대한 인내를 낮출 수 있습니다. 연구에서는 잦은 전환이 작업 기억에 부담을 줄 수 있다고 설명합니다.",
            },
            {
                "heading": "본론 2. 롱폼과 깊이의 회복",
                "body": "롱폼 콘텐츠는 몰입과 서사적 이해를 제공합니다. 기억 연구에서는 긴 맥락이 있을 때 정보가 더 잘 저장된다고 봅니다. 긴 글이나 영상은 집중이 필요한 대신 ‘깊이 있는 이해’를 제공한다는 장점이 있습니다. 문제는 시작하기까지의 진입 장벽이 높다는 점입니다. 그래서 ‘짧은 시작 구간’을 정해두는 것이 도움이 됩니다.",
            },
            {
                "heading": "본론 3. 캡처/정리형 소비의 가치",
                "body": "정보를 저장하거나 요약하는 행동은 입력을 출력으로 전환하는 과정입니다. 이때 인지적 주의가 다시 활성화되고, 기억의 구조화가 이루어집니다. 즉, 소비가 ‘지식’으로 전환되는 순간은 요약/정리에서 발생합니다. 하루에 한 번만이라도 캡처하거나 요약해 보세요. 이 작은 출력이 콘텐츠 소비의 질을 바꿉니다.",
            },
            {
                "heading": "결론",
                "body": "콘텐츠 소비는 습관입니다. 숏폼의 속도와 롱폼의 깊이, 그리고 정리의 전환을 적절히 섞으면 자신만의 균형 루트를 만들 수 있습니다. 오늘은 ‘요약 1개’ 혹은 ‘롱폼 10분’으로 작은 시도를 시작해 보세요. 변화는 작은 루틴에서 가장 강하게 시작됩니다. 입력만 늘리기보다, 출력(요약·정리·공유)을 조금만 늘려도 체감이 크게 달라집니다. 결국 콘텐츠는 ‘많이 보는 것’보다 ‘어떻게 남기는지’가 핵심입니다. 나에게 맞는 소비 루트를 만들면 피로도는 줄고 만족감은 높아집니다.",
            },
        ],
        "deep_dive": "콘텐츠 소비의 질은 ‘입력과 출력의 비율’에 따라 달라집니다. 연구에서는 정보를 다시 표현하는 과정에서 기억이 강화된다고 설명합니다. 즉, 본 것을 요약하거나 공유하는 순간에 학습이 일어납니다. 저장-정주행형의 경우 ‘정주행 시간 확보’가 관건이므로, 주말에 30분 블록을 확보하는 방식이 효과적입니다. 숏폼 과다 소비는 FOMO(놓침에 대한 불안)를 키울 수 있으므로, 하루에 한 번은 ‘느린 콘텐츠’를 의도적으로 선택하는 습관이 도움이 됩니다. 나에게 맞는 소비 루트를 설계하면 재미와 효율을 동시에 확보할 수 있습니다. 정보를 저장해두기만 하면 미처리 목록이 쌓여 스트레스가 될 수 있으니, 주간 정리 시간을 확보하는 것이 좋습니다. 큐레이션은 ‘버리기’와 ‘선택’이 함께 있을 때 작동합니다. 소비 루트를 주 1회 점검하면 불필요한 저장이 줄어듭니다.",
        "deep_dive_extra": "콘텐츠 루트를 설계할 때는 ‘소비 시간’보다 ‘소비 후 남는 것’을 기준으로 판단하세요. 저장만 늘어난다면 과감히 정리하고, 한 주에 한 번 ‘정리 시간’을 확보하는 것이 좋습니다. 작은 정리가 피로를 크게 줄입니다.",
    },
    {
        "slug": "digital-burnout-signals",
        "title": "디지털 번아웃 신호 5가지",
        "summary": "피로가 누적되기 전 신호를 점검하세요.",
        "sections": [
            {
                "heading": "서론",
                "body": "번아웃은 업무 과로만의 문제가 아닙니다. 디지털 자극이 과도해지면 신경계가 쉬지 못하는 상태가 됩니다. 이는 수면 질 저하, 집중력 저하, 감정 기복으로 이어질 수 있습니다. 이 글에서는 디지털 번아웃의 대표 신호와 완화 전략을 정리합니다. 초기 신호를 알아차리는 것이 회복의 절반입니다.",
            },
            {
                "heading": "본론 1. 신체 신호와 수면 문제",
                "body": "가장 먼저 나타나는 신호는 수면의 질 저하입니다. 밤에 잠이 잘 오지 않거나 자고 일어나도 피곤한 상태가 지속된다면 디지털 자극이 회복을 방해하고 있을 가능성이 있습니다. 이는 자율신경계가 과각성 상태로 유지되는 것과 관련이 있습니다. 특히 잠들기 전 강한 시각 자극은 멜라토닌 분비를 방해할 수 있습니다.",
            },
            {
                "heading": "본론 2. 과각성과 알림 의존",
                "body": "알림 소리에 즉각 반응하는 습관은 ‘하이퍼비질런스’ 상태를 강화합니다. 이는 긴장도를 높이고, 집중을 분절시키며, 사소한 자극에도 쉽게 피로해지게 합니다. 메시지를 확인하고도 기억이 남지 않는다면 주의 자원이 이미 고갈되었다는 신호일 수 있습니다. 자주 멍해지는 느낌이 든다면 경계가 필요합니다.",
            },
            {
                "heading": "본론 3. 회복 전략: 경계와 루틴",
                "body": "회복은 자극을 줄이는 것보다 ‘경계’를 만드는 일에 가깝습니다. 저녁 시간에 특정 앱을 끄거나 알림을 제한하는 간단한 규칙부터 시작해 보세요. 또한 잠들기 30분 전 ‘비자극 루틴’(조명 낮추기, 짧은 정리, 글 읽기)은 회복을 크게 돕습니다. 아침에는 첫 30분을 무자극으로 두는 것도 효과적입니다.",
            },
            {
                "heading": "결론",
                "body": "디지털 번아웃은 조기에 발견할수록 회복이 빠릅니다. 신호를 알아차렸다면 즉시 큰 변화보다 작은 경계 하나를 만드는 것부터 시작해 보세요. 작은 루틴이 쌓이면 신경계는 다시 안정적인 리듬을 찾게 됩니다. 결과는 경고가 아니라 방향 신호입니다. 저녁의 디지털 선셋(일정 시간 이후 화면 종료)을 만들어 두면 회복 속도가 빨라집니다. 주말 중 하루만이라도 알림 없는 시간을 확보해 보세요. 회복은 ‘줄이기’보다 ‘경계 만들기’에서 시작됩니다.",
            },
        ],
        "deep_dive": "디지털 번아웃은 종종 ‘무감각’과 ‘과민’이 동시에 나타나는 형태로 드러납니다. 자극에 예민해지면서도, 집중은 어려워지는 모순적인 상태죠. 이때는 회복의 기본 요소인 수면, 운동, 햇빛 노출을 우선순위로 두는 것이 중요합니다. 심박 변이도(HRV)와 같은 지표는 스트레스 상태를 간접적으로 보여주며, 충분한 휴식이 회복에 영향을 준다는 연구들이 있습니다. 실천 측면에서는 아침에 휴대폰을 늦게 켜는 ‘모닝 버퍼’가 효과적일 수 있습니다. 작은 경계가 쌓이면 자율신경계는 서서히 안정됩니다. 짧은 호흡 훈련이나 스트레칭은 교감신경의 과각성을 낮추는 데 도움이 될 수 있습니다. 화면 밝기를 낮추고 야간 모드를 고정해 두는 것도 자극을 줄이는 실용적 방법입니다. 자연광에 노출되는 시간이 늘수록 회복감이 높아졌다는 보고도 있습니다. 가능하다면 주간 평균 스크린 타임을 보며 스스로의 피로 구간을 파악해 보세요. 회복은 누적입니다.",
        "deep_dive_extra": "자극이 높은 날에는 회복 루틴을 더 앞당기는 것이 좋습니다. 예를 들어 저녁 9시 이후 알림 차단, 화면 밝기 낮추기 같은 규칙을 고정해 보세요. 일정한 경계는 신경계의 안정감을 키웁니다. 짧은 산책이나 스트레칭은 회복을 가속하는 데 도움이 됩니다.",
    },
    {
        "slug": "habit-reset",
        "title": "루틴이 무너졌을 때 다시 세우는 3단계",
        "summary": "작게 시작해 되살리는 루틴 회복법.",
        "sections": [
            {
                "heading": "서론",
                "body": "루틴이 무너지는 것은 실패가 아니라 환경 변화에 대한 자연스러운 반응입니다. 중요한 것은 ‘어떻게 다시 세우느냐’입니다. 습관 연구에서는 루틴을 ‘신호-행동-보상’의 고리로 설명하며, 이 고리를 작은 규모로 복원하는 것이 핵심이라고 말합니다. 이 글에서는 무너진 루틴을 다시 붙이는 실전 절차를 소개합니다.",
            },
            {
                "heading": "본론 1. 신호를 다시 설계하기",
                "body": "첫 단계는 시작 신호를 명확하게 만드는 것입니다. 예를 들어 ‘커피를 마신 뒤 5분 스트레칭’처럼 구체적인 시작 조건을 설정하면 실행 확률이 높아집니다. 이를 ‘실행 의도(implementation intention)’라고 하며, 습관 회복에 유의미한 효과가 있는 것으로 알려져 있습니다. 신호가 명확할수록 의지가 아니라 자동성에 의존하게 됩니다.",
            },
            {
                "heading": "본론 2. 행동을 최소 단위로 줄이기",
                "body": "루틴의 크기를 줄이는 것은 의지력을 아끼는 전략입니다. ‘10분 운동’이 부담이라면 ‘스트레칭 2분’으로 낮추는 것이 좋습니다. 중요한 것은 강도가 아니라 반복입니다. 작은 행동은 실패 부담을 줄이고, 다시 반복할 수 있는 여지를 남깁니다. 반복이 쌓이면 자연스럽게 강도를 높일 수 있습니다.",
            },
            {
                "heading": "본론 3. 보상을 명확하게 만들기",
                "body": "보상이 명확할수록 습관은 강화됩니다. 체크리스트에 표시하는 것만으로도 보상이 될 수 있고, 작은 휴식이나 좋아하는 음악도 보상으로 충분합니다. 연구에서는 자기효능감이 높아질수록 습관 유지율이 올라간다고 설명합니다. 보상은 ‘작게, 즉시, 반복적으로’ 제공되는 것이 가장 효과적입니다.",
            },
            {
                "heading": "결론",
                "body": "루틴 회복의 핵심은 ‘작게, 자주, 부담 없이’입니다. 오늘은 가장 작은 행동 하나만 선택해 보세요. 그 반복이 다시 루틴을 세우는 가장 확실한 방법입니다. 완벽함보다 지속성이 더 큰 변화를 만듭니다. 실패가 생기더라도 ‘다음 날 1회 재개’ 규칙을 정하면 회복 속도가 빨라집니다. 습관은 끊김이 아니라 재개 횟수로 만들어집니다. 작은 재개가 곧 강한 루틴입니다.",
            },
        ],
        "deep_dive": "습관 회복은 ‘환경 설계’와 깊게 연결됩니다. 예를 들어 운동 루틴을 되살리고 싶다면, 운동복을 눈에 보이는 곳에 두는 것만으로도 실행 확률이 올라갑니다. 이를 습관 스택(habit stacking)이라고도 하며, 기존 행동 뒤에 새로운 행동을 붙이는 방식입니다. 또한 실패가 발생했을 때 자책보다 ‘재개 기준’을 정하는 것이 중요합니다. 일주일에 3번이 목표였다면, 실패 후에는 ‘다음 날 1회 실행’만으로 리듬을 복구해 보세요. 습관은 강도보다 빈도와 재개 횟수에 의해 만들어집니다. 실패 기록을 남기기보다 ‘재개 기록’을 남기면 동기가 유지됩니다. 가족이나 친구와 가벼운 공유를 하는 것도 지속성에 도움이 됩니다. 환경에 작은 안내문을 붙이는 것만으로도 신호가 강화될 수 있습니다. 작은 성공을 주변에 공유하면 사회적 보상이 생겨 지속성이 높아집니다.",
        "deep_dive_extra": "루틴을 시각화하는 것도 도움이 됩니다. 달력에 체크 표시를 남기거나, 아주 작은 ‘연속 기록’을 만드는 방식은 재개를 쉽게 합니다. 반복의 흔적은 자기효능감을 강화합니다. 실행 후 작은 보상을 붙이면 재개가 더 쉬워집니다. 간단한 체크리스트를 눈에 보이는 곳에 두는 것만으로도 재개가 쉬워집니다. 표시가 쌓이면 자신감이 붙습니다. 하루 1칸이라도 채우면 충분합니다.",
    },
    {
        "slug": "content-diet",
        "title": "콘텐츠 다이어트, 실패하지 않는 방법",
        "summary": "줄이기보다 교체하기에 집중합니다.",
        "sections": [
            {
                "heading": "서론",
                "body": "콘텐츠 다이어트가 실패하는 이유는 ‘끊기’에만 집중하기 때문입니다. 행동 설계 관점에서는 단순 금지보다 ‘대체 행동’이 훨씬 성공률이 높습니다. 이 글은 자극을 줄이는 대신, 더 나은 콘텐츠 습관으로 바꾸는 방법을 소개합니다. 핵심은 의지가 아니라 구조입니다.",
            },
            {
                "heading": "본론 1. 선택 구조를 바꾸기",
                "body": "사람은 환경이 허용하는 대로 행동합니다. 앱 알림, 홈 화면 배치, 자동 추천은 모두 ‘기본 선택(default)’을 강화합니다. 콘텐츠 다이어트는 이 기본값을 바꾸는 일입니다. 알림 최소화, 앱 숨기기, 추천 피드 차단은 강한 효과를 보일 수 있습니다. 작은 환경 수정이 큰 행동 변화를 만들 수 있습니다.",
            },
            {
                "heading": "본론 2. 대체 행동을 설계하기",
                "body": "시간을 비워두면 다시 이전 습관으로 돌아가기 쉽습니다. 대신 ‘짧고 낮은 자극의 대체 활동’을 준비해 보세요. 간단한 스트레칭, 짧은 글 읽기, 메모 정리 같은 행동은 디지털 자극을 부드럽게 대체하는 역할을 합니다. 대체 행동은 준비가 쉬울수록 지속됩니다.",
            },
            {
                "heading": "본론 3. 능동적 소비로 전환",
                "body": "수동 소비는 피로를 높이고 만족감을 줄입니다. 반대로 ‘능동 소비’는 정보를 ‘내 것’으로 바꾸는 과정입니다. 한 줄 요약, 느낀 점 기록, 짧은 공유 같은 출력 행동이 도움이 됩니다. 이는 기억 강화에도 긍정적으로 작용합니다. 입력과 출력의 균형이 유지되면 피로도는 크게 줄어듭니다.",
            },
            {
                "heading": "결론",
                "body": "콘텐츠 다이어트는 끊는 것이 아니라 바꾸는 것입니다. 오늘은 가장 작은 환경 변경 하나와 대체 활동 하나를 정해 보세요. 그 작은 조정이 습관 전체의 방향을 바꿉니다. 변화의 핵심은 ‘지속 가능한 설계’입니다. 앱 접근성을 낮추고 필요한 콘텐츠만 남기는 구조를 만들어 보세요. 대체 행동은 짧고 쉬울수록 성공 확률이 높습니다. 결국 중요한 건 의지가 아니라 환경입니다.",
            },
        ],
        "deep_dive": "콘텐츠 다이어트의 핵심은 ‘접근성 조절’입니다. 알고리즘 피드는 강한 자극을 우선 배치하기 때문에, 의식적으로 보지 않으면 자연스럽게 과소비가 발생합니다. 홈 화면을 단순화하거나, 추천 앱을 폴더 깊숙이 넣는 것만으로도 실행 시간이 줄어듭니다. 또한 ‘대체 콘텐츠 리스트’를 만들어 두면 선택의 피로가 줄어듭니다. 예를 들어 짧은 글, 뉴스레터, 책 한 페이지처럼 접근성이 낮지만 보상은 높은 콘텐츠를 정해두는 것이 좋습니다. 작은 환경 조정이 장기적인 습관 변화를 만들 수 있습니다. 알고리즘이 제안하는 콘텐츠를 그대로 받아들이기보다, 내가 선택하는 입력을 늘리는 것이 핵심입니다. 필요하지 않은 구독을 정리하고, 읽을 목록을 미리 만들어 두면 선택 피로가 줄어듭니다. 주간 단위로 콘텐츠 목표를 정하는 것도 효과적입니다. 콘텐츠 ‘단식’보다 ‘다이어트’가 지속됩니다. 작게 조정한 변화가 가장 오래 남습니다.",
        "deep_dive_extra": "또 하나의 팁은 ‘정보 입력 전 3초 멈춤’입니다. 짧은 멈춤만으로도 자동적 스크롤을 줄일 수 있습니다. 작은 멈춤이 쌓이면 소비의 질이 달라집니다. 알림 최소화와 함께 시간 제한을 두면 효과가 큽니다. 콘텐츠 목표를 주간 캘린더에 넣어 두면 실천률이 높아집니다. 가장 중요한 건 반복 가능한 수준으로 낮추는 것입니다. 작게 바꾸는 게 오래 갑니다. 지금의 속도를 유지하세요. 작게, 꾸준히. 조금씩만.",
    },
    {
        "slug": "mini-mission-power",
        "title": "작은 미션이 큰 변화를 만드는 이유",
        "summary": "실행 가능한 미션이 결과를 현실로 바꿉니다.",
        "sections": [
            {
                "heading": "서론",
                "body": "사람은 거대한 목표보다 ‘작은 실행’에 더 잘 반응합니다. 행동 활성화(behavioral activation) 이론에서도 작은 행동이 정서와 동기를 회복시키는 핵심으로 설명됩니다. 이 글은 왜 작은 미션이 실제 변화를 만들 수 있는지 심리학적 관점에서 풀어봅니다. 작은 실행은 방향을 잃지 않게 해주는 최소 단위입니다.",
            },
            {
                "heading": "본론 1. 자기효능감의 누적",
                "body": "작은 미션은 ‘해낼 수 있다’는 경험을 빠르게 제공합니다. 이것이 자기효능감을 높이고 다음 행동의 문턱을 낮춥니다. 연구에서는 자기효능감이 높을수록 장기적인 행동 변화가 유지될 가능성이 커진다고 설명합니다. 즉, 작은 성공의 누적이 큰 변화를 만드는 기반이 됩니다.",
            },
            {
                "heading": "본론 2. 보상 회로의 재구성",
                "body": "큰 목표는 보상이 지연되어 동기 유지가 어렵습니다. 반면 작은 행동은 즉시 보상을 제공합니다. 이때 뇌는 ‘작은 성공 = 긍정적 감정’으로 학습하게 됩니다. 결과적으로 행동은 더 자주 반복되고 습관화됩니다. 이 과정을 통해 보상 회로는 더 안정적인 패턴을 형성합니다.",
            },
            {
                "heading": "본론 3. 시스템으로 전환하기",
                "body": "미션을 시스템으로 만들면 변화가 안정됩니다. 예를 들어 ‘하루 1문장 기록’, ‘알림 1개 줄이기’ 같은 미션을 반복하면, 큰 목표를 세우지 않아도 변화가 축적됩니다. 이런 작은 시스템은 실패 부담을 줄이고 지속성을 높입니다. 결국 시스템은 의지 대신 환경과 구조가 행동을 이끄는 방식입니다.",
            },
            {
                "heading": "결론",
                "body": "변화는 거창한 결심보다 작은 미션에서 시작됩니다. 오늘 딱 1개의 행동만 정해보세요. 작은 미션이 쌓이면 결과는 자연스럽게 현실이 됩니다. 작지만 반복 가능한 미션이 결국 가장 큰 힘이 됩니다. 미션을 체크리스트로 기록하면 지속성이 높아지고 성취감이 빨리 축적됩니다. 실행이 끊겼을 때는 ‘가장 쉬운 버전’으로 다시 시작해도 됩니다. 작은 실행이 다시 리듬을 살립니다.",
            },
        ],
        "deep_dive": "작은 미션이 효과적인 이유는 행동 활성화의 ‘시작 마찰’을 낮추기 때문입니다. 심리학에서는 행동을 시작하는 순간의 저항을 줄이면 유지율이 올라간다고 설명합니다. 미션을 설계할 때는 ‘측정 가능성’이 중요합니다. 예를 들어 ‘5분 정리’, ‘알림 1개 끄기’처럼 측정 가능한 목표가 가장 잘 작동합니다. 또한 성공 경험을 기록하면 자기효능감이 빠르게 축적됩니다. 장기적으로는 작은 미션들이 하나의 시스템이 되어, 의지보다 구조가 행동을 이끌게 됩니다. 작은 미션을 수행한 뒤 즉시 자신을 칭찬하는 것도 행동 강화에 도움이 됩니다. ‘연속 2일 성공’ 같은 미니 챌린지를 만들면 몰입이 높아집니다. 실패해도 바로 재개할 수 있게, 가장 쉬운 버전을 미리 준비해 두세요. 미션을 시간대와 연결하면 자동성이 높아집니다. 작은 성과를 매번 축하하는 것도 동기를 살립니다.",
        "deep_dive_extra": "미션은 ‘작게 시작해, 성공하면 확장’이 원칙입니다. 처음부터 크게 설정하면 실패 경험이 누적되기 쉽습니다. 작게 성공을 쌓고, 그 다음에 강도를 높이는 방식이 가장 안정적입니다. 성공 기준을 낮추는 것은 실패를 줄이는 가장 빠른 방법입니다. 작은 성공을 여러 번 쌓은 뒤 확장하는 것이 가장 안정적입니다. 작은 성공이 쌓이면 큰 변화도 자연스럽게 따라옵니다. 천천히 늘려도 충분합니다. 정답은 꾸준함입니다. 꾸준히.",
    },
    {
        "slug": "how-to-read-results",
        "title": "테스트 결과를 똑똑하게 읽는 법",
        "summary": "결과는 방향을 제시할 뿐, 정답이 아닙니다.",
        "sections": [
            {
                "heading": "서론",
                "body": "심리테스트는 진단 도구가 아니라 ‘자기 이해를 위한 힌트’입니다. 심리측정학에서는 신뢰도(reliability)와 타당도(validity)라는 기준으로 도구의 한계를 설명합니다. 이 글은 결과를 과신하지 않으면서도 실천으로 이어지게 만드는 읽기 방법을 안내합니다. 핵심은 결과를 ‘정답’이 아닌 ‘방향’으로 받아들이는 태도입니다.",
            },
            {
                "heading": "본론 1. 결과는 상태의 스냅샷",
                "body": "테스트 결과는 고정된 성격이 아니라 ‘지금의 상태’를 보여줍니다. 수면, 스트레스, 일정 같은 요인이 결과에 영향을 주는 것은 자연스러운 일입니다. 따라서 결과를 ‘현재의 리듬을 보여주는 거울’로 받아들이는 것이 안전합니다. 시간과 상황이 바뀌면 결과도 달라질 수 있습니다.",
            },
            {
                "heading": "본론 2. 라벨보다 행동으로 해석하기",
                "body": "라벨은 이해를 돕지만 때로는 자기 고정관념을 강화합니다. 결과를 ‘나는 이 타입’으로 끝내기보다, ‘지금 내 행동은 이런 방향이다’로 해석하세요. 그런 해석이 더 유연하고 행동 변화로 이어집니다. 즉, 결과를 행동 설계의 참고점으로 활용하는 것이 중요합니다.",
            },
            {
                "heading": "본론 3. 테스트는 작은 실험 도구",
                "body": "가장 좋은 방법은 결과를 ‘실험의 출발점’으로 보는 것입니다. 제안된 미션을 수행한 뒤 다시 테스트해 보면 변화의 방향을 확인할 수 있습니다. 이는 스스로에게 맞는 루틴을 찾아가는 과정입니다. 작은 실험을 반복하면 결과의 의미가 더 선명해집니다.",
            },
            {
                "heading": "결론",
                "body": "결과는 정답이 아니라 방향입니다. 과신하지도, 무시하지도 말고 오늘의 행동으로 연결해 보세요. 작은 실행이 쌓일 때 테스트는 의미 있는 도구가 됩니다. 결국 중요한 것은 결과를 삶의 리듬으로 번역하는 과정입니다. 다른 유형의 해설도 참고하면 자신의 패턴을 더 입체적으로 볼 수 있습니다. 일정 시간이 지난 뒤 다시 테스트해 보면 변화가 더 선명하게 드러납니다. 결과는 끝이 아니라 다음 행동의 출발점입니다.",
            },
        ],
        "deep_dive": "심리테스트는 대부분 자기보고식 척도에 기반합니다. 이는 응답자의 컨디션, 사회적 바람직성, 순간 감정의 영향을 받을 수 있다는 뜻입니다. 따라서 결과는 절대적 진리가 아니라 ‘가능성의 지도’로 해석하는 것이 좋습니다. 다른 결과 유형의 설명을 읽어보면 자신의 행동 패턴을 더 입체적으로 이해할 수 있습니다. 일정 기간 후 다시 테스트를 하면 변화의 방향이 보이고, 그 자체가 자기 피드백이 됩니다. 결과는 평가가 아니라 실험의 출발점이라는 점을 기억해 주세요. 결과를 해석할 때는 ‘어떤 상황에서’ 그런 선택을 했는지 메모하면 편향을 줄일 수 있습니다. 테스트는 나의 변화를 추적하는 도구로 사용될 때 가장 가치가 큽니다. 결과를 참고해 작은 실험을 반복하면 자기 이해가 깊어집니다. 결과를 기록해 두면 변화 추이를 시각화하기 쉽습니다. 다른 사람과 비교하기보다 내 흐름에 집중해 보세요.",
        "deep_dive_extra": "마지막으로, 결과는 ‘내가 나를 이해하는 도구’로 사용해야 합니다. 타인의 결과와 비교하기보다 나의 변화를 기록하면 테스트가 진짜 의미를 갖습니다. 변화의 기록은 자기 인식의 깊이를 키웁니다. 그 과정에서 나에게 맞는 미션이 선명해집니다. 결과를 주간 노트에 남기면 변화의 방향이 더 잘 보입니다. 짧은 메모만으로도 해석의 질이 달라집니다. 조급함을 줄이는 데 도움이 됩니다. 기록이 쌓이면 통찰이 생깁니다.",
    },
]

QUIZ_SEO = {
    "dopamine-test": {
        "title": "2026 도파민 디톡스 지수 테스트 | 나의 뇌는 안녕한가요?",
        "description": "무분별한 숏폼 스크롤과 자극적인 알림으로 지친 당신의 뇌 상태를 진단하세요. 2026년 최신 심리 트렌드를 반영한 도파민 중독 지수 측정 및 뇌과학 기반의 맞춤형 디톡스 처방전을 제공합니다.",
        "og_image": "img/kakao_share.png",
        "body": "도파민 디톡스, 2026 트렌드, 숏폼 스크롤, 자극 알림, 뇌 상태 진단, 맞춤형 디톡스 처방",
    },
    "micro-spending": {
        "title": "마이크로 소비 성향 테스트 | 소확행과 텅장 사이, 나의 결제 DNA는?",
        "description": "만 원 이하의 작은 지출이 당신의 삶을 어떻게 바꾸고 있나요? 나의 소비 유형을 심층 분석하고, 현명한 소확행을 위한 행동경제학 기반의 결제 습관 교정 가이드를 확인하세요.",
        "og_image": "img/micro_kakao.png",
        "body": "마이크로 소비 성향, 소확행, 결제 DNA, 행동경제학, 결제 습관, 소비 유형 분석",
    },
    "loneliness-management": {
        "title": "외로움 관리 스타일 테스트 | 느슨한 연대와 온전한 독립 사이",
        "description": "외로움은 결핍이 아니라 관리의 대상입니다. 당신의 사회적 고립 정도와 관계의 온도를 체크하고, 2026년형 멘탈 웰니스를 위한 최적의 '관계 거리 조절법'을 제안합니다.",
        "og_image": "img/lonely_kakao.png",
        "body": "외로움 관리 스타일, 느슨한 연대, 온전한 독립, 관계 거리 조절, 사회적 고립, 멘탈 웰니스",
    },
    "intentional-vs-optimization": {
        "title": "의도적 삶 vs 효율 과몰입 테스트 | 당신의 '갓생'은 안전한가요?",
        "description": "무조건적인 효율 추구가 당신을 번아웃으로 몰아넣고 있지는 않나요? 아날로그 리추얼과 디지털 최적화 사이의 균형점을 찾고, 삶의 주도권을 회복하기 위한 심리학적 솔루션을 만나보세요.",
        "og_image": "img/liquid_main.png",
        "body": "의도적 삶, 효율 과몰입, 갓생, 번아웃, 아날로그 리추얼, 디지털 최적화",
    },
    "liquid-content": {
        "title": "콘텐츠 소비 스타일 테스트 | 알고리즘의 노예인가, 콘텐츠의 주인인가?",
        "description": "내가 보는 것이 곧 나를 만듭니다. 숏폼 서핑부터 정주행까지, 당신의 디지털 콘텐츠 소비 습관을 분석하고 2026년형 건강한 스크린 타임 리포트를 제공합니다.",
        "og_image": "img/content_main.png",
        "body": "콘텐츠 소비 스타일, 알고리즘, 숏폼 서핑, 정주행, 스크린 타임, 디지털 습관",
    },
    "travel-soul-test": {
        "title": "캐리어 속 내 본성 찾기 | 나의 2026 여행 영혼 테스트",
        "description": "팝업 오픈런 vs 무자극 방구석? 8개의 질문으로 나의 진짜 여행 페르소나를 찾고, 여행 스타일에 맞는 행동 미션을 확인해 보세요.",
        "og_image": "img/travel_kakao.png",
        "body": "여행 영혼 테스트, 캐리어 속 내 본성, 여행 페르소나, 여행 성향 분석, 2026 트렌드 테스트",
    },
}


def _build_og_image(request, image_path):
    if not image_path:
        return f"{request.scheme}://{request.get_host()}{static('img/kakao_share.png')}"
    if image_path.startswith("http"):
        return image_path
    return f"{request.scheme}://{request.get_host()}{static(image_path.lstrip('/'))}"


def _seo_context(request, quiz):
    seo = QUIZ_SEO.get(quiz.slug)
    if not seo:
        return {}
    return {
        "meta_title": seo["title"],
        "meta_description": seo["description"],
        "og_title": seo["title"],
        "og_description": seo["description"],
        "og_image": _build_og_image(request, seo.get("og_image")),
        "seo_body": seo.get("body", ""),
        "canonical_url": request.build_absolute_uri(),
    }

QUIZ_GUIDES = {
    "dopamine-test": {
        "title": "도파민 디톡스 지수 테스트 해설",
        "summary": "자극 피로가 쌓일 때 나타나는 패턴과 회복 루틴을 정리합니다.",
        "sections": [
            {
                "heading": "이 테스트가 보는 것",
                "body": "짧고 강한 자극에 얼마나 자주 반응하는지, 그리고 그 이후의 회복 패턴을 확인합니다. ‘즐거움’이 줄어들고 ‘피로감’이 남는 순간이 많다면, 자극의 강도를 조절할 필요가 있습니다.",
            },
            {
                "heading": "결과를 해석하는 방법",
                "body": "결과는 ‘고정된 성격’이 아니라 지금의 리듬을 보여주는 스냅샷입니다. 상황에 따라 얼마든지 달라질 수 있으니, 오늘의 상태를 가볍게 참고해 주세요.",
            },
            {
                "heading": "실행 팁",
                "body": "하루 10분의 노-스크롤 시간, 한 번의 산책, 한 가지 정리부터 시작해 보세요. 큰 변화보다 작은 반복이 효과적입니다.",
            },
        ],
    },
    "micro-spending": {
        "title": "마이크로 소비 성향 테스트 해설",
        "summary": "작은 결제가 남기는 감정과 만족의 지속성을 살펴봅니다.",
        "sections": [
            {
                "heading": "이 테스트가 보는 것",
                "body": "소비 동기가 ‘기분 보상’인지, ‘효율 개선’인지, 혹은 ‘기억 수집’인지에 따라 일상이 달라집니다. 작은 결제는 습관이 되기 쉬워요.",
            },
            {
                "heading": "결과를 해석하는 방법",
                "body": "결과는 ‘잘/못’이 아니라 ‘나에게 맞는 소비 방식’을 알려주는 힌트입니다. 만족감이 오래 가는 소비를 기준으로 재정렬해 보세요.",
            },
            {
                "heading": "실행 팁",
                "body": "한 달 예산을 세분화하기보다, ‘주간 구매 빈도’를 줄이는 것만으로도 체감 변화가 큽니다.",
            },
        ],
    },
    "loneliness-management": {
        "title": "외로움 관리 스타일 테스트 해설",
        "summary": "혼자 있는 시간과 연결의 균형을 어떻게 맞추는지에 집중합니다.",
        "sections": [
            {
                "heading": "이 테스트가 보는 것",
                "body": "외로움은 연결의 양보다 ‘나에게 맞는 연결 방식’이 부족할 때 커집니다. 혼자만의 시간도, 가벼운 소셜도 모두 정답이 될 수 있어요.",
            },
            {
                "heading": "결과를 해석하는 방법",
                "body": "결과는 나의 회복 방식을 보여줍니다. 지금의 회복 방식이 유지 가능한지, 부담이 없는지 확인해 보세요.",
            },
            {
                "heading": "실행 팁",
                "body": "짧은 안부 메시지 1개 또는 깊은 대화 1번 중 하나만 선택해도 충분합니다.",
            },
        ],
    },
    "intentional-vs-optimization": {
        "title": "의도적 삶 vs 효율 과몰입 테스트 해설",
        "summary": "리추얼과 효율 사이에서 나의 균형점을 찾는 테스트입니다.",
        "sections": [
            {
                "heading": "이 테스트가 보는 것",
                "body": "성취 중심의 효율과, 삶의 감각을 되살리는 리추얼 사이에서 어디에 가까운지 확인합니다.",
            },
            {
                "heading": "결과를 해석하는 방법",
                "body": "균형은 정답이 아닙니다. 지금 내 삶에 필요한 것을 우선순위로 두는 것이 현실적인 해석입니다.",
            },
            {
                "heading": "실행 팁",
                "body": "하루에 단 하나의 ‘의식’을 만들거나, 반대로 효율을 높일 작은 자동화를 하나만 추가해 보세요.",
            },
        ],
    },
    "liquid-content": {
        "title": "콘텐츠 소비 스타일 테스트 해설",
        "summary": "짧게 많이 보는 흐름과 깊게 남기는 습관을 비교합니다.",
        "sections": [
            {
                "heading": "이 테스트가 보는 것",
                "body": "콘텐츠를 소비한 뒤 남는 것이 무엇인지에 집중합니다. ‘재미’, ‘기억’, ‘정리’ 중 무엇이 중심인지 확인해 보세요.",
            },
            {
                "heading": "결과를 해석하는 방법",
                "body": "결과는 소비 방식의 장단점을 보여줍니다. 부족한 부분을 하나만 보완하면 균형이 잡힙니다.",
            },
            {
                "heading": "실행 팁",
                "body": "하루 한 번은 ‘정리/저장/공유’ 중 하나를 의도적으로 해보세요. 소비의 질이 달라집니다.",
            },
        ],
    },
    "travel-soul-test": {
        "title": "나의 여행 영혼 테스트 해설",
        "summary": "여행에서 반복되는 선택 패턴으로 나의 여행 페르소나를 확인합니다.",
        "sections": [
            {
                "heading": "이 테스트가 보는 것",
                "body": "여행지에서 무엇을 우선순위로 두는지(효율, 휴식, 사진, 낭만, 미식, 힐링, 교류, 준비성)를 체크합니다.",
            },
            {
                "heading": "결과를 해석하는 방법",
                "body": "결과는 여행할 때 반복되는 의사결정 패턴을 보여주는 힌트입니다. 상황에 따라 바뀔 수 있으니 지금의 성향으로 가볍게 참고해 주세요.",
            },
            {
                "heading": "실행 팁",
                "body": "다음 여행에서 미션 한 가지만 실제로 적용해 보세요. 작은 변화만으로도 여행 만족도가 크게 달라질 수 있습니다.",
            },
        ],
    },
}


def blog_list(request):
    posts = BlogPost.objects.filter(is_published=True).order_by("-created_at")
    context = {
        "posts": posts,
        "show_ads": True,
        "meta_title": "블로그 | 2026 트렌드 심리테스트",
        "meta_description": "트렌드 심리테스트 해설과 행동 패턴 가이드를 제공하는 정보성 블로그입니다.",
        "og_title": "블로그 | 2026 트렌드 심리테스트",
        "og_description": "트렌드 심리테스트 해설과 행동 패턴 가이드를 제공하는 정보성 블로그입니다.",
        "og_image": _build_og_image(request, None),
        "canonical_url": request.build_absolute_uri(),
    }
    return render(request, "blog/blog_list.html", context)


def blog_detail(request, slug):
    post = get_object_or_404(BlogPost.objects.prefetch_related("images"), slug=slug, is_published=True)
    summary = post.summary or post.intro
    context = {
        "post": post,
        "show_ads": True,
        "meta_title": f"{post.title} | 2026 트렌드 심리테스트",
        "meta_description": summary[:160],
        "og_title": post.title,
        "og_description": summary[:160],
        "og_image": _build_og_image(request, post.og_image_url),
        "canonical_url": request.build_absolute_uri(),
    }
    return render(request, "blog/blog_detail.html", context)


def quiz_guide(request, quiz_slug):
    quiz = get_object_or_404(Quiz, slug=quiz_slug, is_active=True)
    guide = QUIZ_GUIDES.get(quiz.slug)
    context = {"quiz": quiz, "guide": guide, "show_ads": True}
    context.update(_seo_context(request, quiz))
    return render(request, "quiz/quiz_guide.html", context)


def robots_txt(request):
    base_url = request.build_absolute_uri("/")[:-1]
    content = "\n".join(
        [
            "User-agent: *",
            "Disallow:",
            f"Sitemap: {base_url}/sitemap.xml",
        ]
    )
    return HttpResponse(content, content_type="text/plain")


def sitemap_xml(request):
    base_url = request.build_absolute_uri("/")[:-1]
    urls = [
        f"{base_url}/",
        f"{base_url}/blog/",
        f"{base_url}/privacy/",
        f"{base_url}/about/",
        f"{base_url}/contact/",
        f"{base_url}/terms/",
    ]

    for post in BlogPost.objects.filter(is_published=True).only("slug"):
        urls.append(f"{base_url}/blog/{post.slug}/")

    quizzes = Quiz.objects.filter(is_active=True)
    for quiz in quizzes:
        urls.append(f"{base_url}/t/{quiz.slug}/")
        urls.append(f"{base_url}/t/{quiz.slug}/guide/")

    urlset = "\n".join(
        [f"  <url><loc>{loc}</loc></url>" for loc in urls]
    )
    xml = f"""<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
{urlset}
</urlset>
"""
    return HttpResponse(xml, content_type="application/xml")


def _extract_score(request, question):
    score_value = request.POST.get("score")
    if score_value is not None:
        try:
            return int(score_value)
        except ValueError:
            return 0

    choice_id = request.POST.get("choice")
    if not choice_id:
        return 0

    choice = get_object_or_404(Choice, id=choice_id, question=question)
    if isinstance(choice.score, dict):
        total = 0
        for value in choice.score.values():
            try:
                total += int(value)
            except (TypeError, ValueError):
                continue
        return total
    return 0


# 1. 테스트 목록 (홈 화면)
def quiz_list(request):
    quizzes = list(Quiz.objects.filter(is_active=True))
    display_order = [
        "dopamine-test",
        "micro-spending",
        "loneliness-management",
        "intentional-vs-optimization",
        "liquid-content",
        "travel-soul-test",
    ]
    order_index = {slug: idx for idx, slug in enumerate(display_order)}
    quizzes.sort(key=lambda item: order_index.get(item.slug, len(display_order)))
    return render(request, "quiz/quiz_list.html", {"quizzes": quizzes, "show_ads": True})


# 2. 테스트 시작 (인트로) - 점수 초기화
def quiz_intro(request, quiz_slug):
    quiz = get_object_or_404(Quiz, slug=quiz_slug, is_active=True)
    request.session["total_score"] = 0
    request.session["user_answers"] = []
    context = {"quiz": quiz, "show_ads": False}
    context.update(_seo_context(request, quiz))
    return render(request, "quiz/quiz_intro.html", context)


# 3. 질문 페이지 - 점수 누적 로직
def quiz_question(request, quiz_slug, question_id):
    quiz = get_object_or_404(Quiz, slug=quiz_slug, is_active=True)
    questions = quiz.questions.all().order_by("order", "id")
    question = get_object_or_404(Question, id=question_id, quiz=quiz)

    if request.method == "POST":
        choice_type = request.POST.get("choice_type")
        user_answers = request.session.get("user_answers", [])
        if choice_type:
            user_answers.append(choice_type)
            request.session["user_answers"] = user_answers
        else:
            score = _extract_score(request, question)
            request.session["total_score"] = request.session.get("total_score", 0) + score

        next_question = questions.filter(order__gt=question.order).first()
        if next_question:
            return redirect("quiz:quiz_question", quiz_slug=quiz.slug, question_id=next_question.id)
        return redirect("quiz:quiz_result", quiz_slug=quiz.slug)

    return render(
        request,
        "quiz/quiz_question.html",
        {"quiz": quiz, "question": question, "show_ads": False},
    )


def _resolve_final_type(user_answers, valid_types):
    if not user_answers or not valid_types:
        return None

    type_scores = {result_type: 0.0 for result_type in valid_types}
    answer_count = len(user_answers)

    for index, answer_type in enumerate(user_answers):
        if answer_type not in type_scores:
            continue
        weight = 1.5 if index >= max(answer_count - 2, 0) else 1.0
        type_scores[answer_type] += weight

    if not any(type_scores.values()):
        return None

    max_score = max(type_scores.values())
    tied_types = [result_type for result_type, score in type_scores.items() if score == max_score]

    if len(tied_types) == 1:
        return tied_types[0]

    for answer_type in reversed(user_answers):
        if answer_type in tied_types:
            return answer_type

    return sorted(tied_types)[0]


# 4. 결과 페이지 - 타입/점수 혼합 매칭
def quiz_result(request, quiz_slug):
    quiz = get_object_or_404(Quiz, slug=quiz_slug, is_active=True)
    user_answers = request.session.get("user_answers", [])

    valid_types = list(
        Result.objects.filter(quiz=quiz)
        .exclude(result_type="")
        .values_list("result_type", flat=True)
        .distinct()
    )

    final_type = _resolve_final_type(user_answers, valid_types)

    if final_type:
        result = Result.objects.filter(quiz=quiz, result_type=final_type).first()
    else:
        score = request.session.get("total_score", 0)
        result = (
            Result.objects.filter(quiz=quiz, min_score__lte=score, max_score__gte=score)
            .order_by("min_score")
            .first()
        )

    rarity = random.randint(3, 12)
    base_type = final_type or getattr(result, "result_type", None)
    match_result = None
    if base_type:
        other_types = [result_type for result_type in valid_types if result_type != base_type]
        if other_types:
            match_type = random.choice(other_types)
            match_result = Result.objects.filter(quiz=quiz, result_type=match_type).first()

    result_share_image_url = ""
    if result:
        if getattr(result, "share_image", None):
            result_share_image_url = request.build_absolute_uri(result.share_image.url)
        elif result.share_image_url:
            result_share_image_url = result.share_image_url

    context = {
        "quiz": quiz,
        "result": result,
        "score": request.session.get("total_score", 0),
        "kakao_js_key": os.getenv("KAKAO_JS_KEY"),
        "kakao_share_image_url": os.getenv("KAKAO_SHARE_IMAGE_URL"),
        "result_share_image_url": result_share_image_url,
        "rarity": rarity,
        "match_result": match_result,
        "show_ads": True,
    }
    context.update(_seo_context(request, quiz))
    return render(request, "quiz/quiz_result.html", context)


def error_404(request, exception):
    return render(request, "404.html", status=404)
