{% extends "base.html" %}

{% block title %}분석 중{% endblock %}

{% block extra_head %}
<style>
    .loader-orbit {
        position: relative;
        width: 180px;
        height: 180px;
    }

    .loader-orbit span {
        position: absolute;
        inset: 0;
        border-radius: 9999px;
        border: 2px solid rgba(79, 252, 255, 0.2);
        animation: spin 4s linear infinite;
    }

    .loader-orbit span:nth-child(2) {
        inset: 18px;
        border-color: rgba(255, 79, 216, 0.35);
        animation-duration: 3.2s;
        animation-direction: reverse;
    }

    .loader-orbit span:nth-child(3) {
        inset: 36px;
        border-color: rgba(124, 60, 255, 0.35);
        animation-duration: 2.6s;
    }

    .loader-core {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 70px;
        height: 70px;
        border-radius: 24px;
        background: linear-gradient(135deg, rgba(79, 252, 255, 0.9), rgba(255, 79, 216, 0.8));
        box-shadow: 0 0 30px rgba(79, 252, 255, 0.6);
        animation: pulseCore 1.8s ease-in-out infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    @keyframes pulseCore {
        0%, 100% { transform: translate(-50%, -50%) scale(1); }
        50% { transform: translate(-50%, -50%) scale(1.08); }
    }
</style>
{% endblock %}

{% block content %}
<section class="glass flex flex-col items-center justify-center rounded-3xl px-6 py-14 text-center md:px-12">
    <div class="loader-orbit">
        <span></span>
        <span></span>
        <span></span>
        <div class="loader-core"></div>
    </div>
    <h2 class="mt-8 text-2xl font-semibold md:text-3xl">당신의 호르몬 믹스를 분석 중입니다...</h2>
    <!-- Display ad slot (place the async AdSense script in base.html head for best performance). -->
    <div class="mt-6 w-full max-w-3xl rounded-2xl border border-neon-cyan/30 bg-night-900/60 px-6 py-8 text-left">
        <!-- TODO: Paste Google AdSense display ad code here -->
        <p class="mono text-xs uppercase tracking-[0.3em] text-neon-cyan">Sponsored</p>
        <p class="mt-2 text-sm text-slate-400">"분석 중입니다..." 메시지 바로 아래 광고 영역입니다.</p>
    </div>
    <p class="mt-3 text-sm text-slate-400">네온 신경망이 패턴을 정밀 계산하고 있어요.</p>
    <p class="mono mt-6 text-xs uppercase tracking-[0.4em] text-neon-cyan">Analyzing</p>
</section>
{% endblock %}

{% block extra_scripts %}
<script>
    const delayOptions = [3200, 3800, 4400, 5000];
    const delay = delayOptions[Math.floor(Math.random() * delayOptions.length)];
    setTimeout(() => {
        window.location.href = "{{ result_url }}";
    }, delay);
</script>
{% endblock %}
